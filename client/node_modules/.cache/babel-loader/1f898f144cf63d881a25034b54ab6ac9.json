{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Kukulj\\\\Desktop\\\\chat4\\\\client\\\\src\\\\components\\\\Chat\\\\Chat.js\";\nimport React, { useState, useEffect } from 'react';\nimport { queriString } from 'query-string';\nimport io from 'socket.io-client';\nlet socket;\nconst Chat = _ref => {\n  let {\n    location\n  } = _ref;\n  const [name, setName] = useState('');\n  const [room, setRoom] = useState('');\n  const [message, setMessage] = useState('');\n  const [messages, setMessages] = useState([]);\n  const ENDPOINT = 'localhost:5000';\n  useEffect(() => {\n    const {\n      name,\n      room\n    } = queryString.parse(location.search);\n    socket = io(ENDPOINT);\n    setRoom(room);\n    setName(name);\n    socket.emit('join', {\n      name,\n      room\n    }, () => {});\n    return () => {\n      socket.emit('disconnect');\n      socket.off();\n    };\n  }, [ENDPOINT, location.search]);\n  useEffect(() => {\n    socket.on('message', message => {\n      setMessages({\n        ...messages,\n        message\n      });\n    });\n  }, [messages]);\n  //funkcija za slanje poruka\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"outerContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 1\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(InfoBar, {\n    room: room,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(Messages, {\n    messages: messages,\n    name: name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    message: message,\n    setMessage: setMessage,\n    sendMessage: sendMessage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(TextContainer, {\n    users: users,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 5\n    }\n  }));\n};\nexport default Chat;","map":{"version":3,"names":["React","useState","useEffect","queriString","io","socket","Chat","_ref","location","name","setName","room","setRoom","message","setMessage","messages","setMessages","ENDPOINT","queryString","parse","search","emit","off","on","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","InfoBar","Messages","Input","sendMessage","TextContainer","users"],"sources":["C:/Users/Kukulj/Desktop/chat4/client/src/components/Chat/Chat.js"],"sourcesContent":["import React,{useState, useEffect} from 'react';\r\nimport {queriString} from 'query-string';\r\nimport io from 'socket.io-client';\r\n\r\nlet socket;\r\n    \r\nconst Chat = ({location}) => {\r\n    const [name, setName] = useState ('');\r\n    const [room, setRoom] = useState ('');\r\n    const [message, setMessage] = useState ('');\r\n    const [messages, setMessages] = useState ([]);\r\n    const ENDPOINT = 'localhost:5000';\r\n\r\n        \r\n    useEffect(() => {\r\n        const { name, room } = queryString.parse(location.search);\r\n    \r\n        socket = io(ENDPOINT);\r\n    \r\n        setRoom(room);\r\n        setName(name)\r\n    \r\n       \r\n            socket.emit('join', {name, room}, () => {\r\n\r\n            });\r\n\r\n            return () => {\r\n                socket.emit('disconnect');\r\n\r\n                socket.off();\r\n            }\r\n        }, [ENDPOINT, location.search]);\r\n\r\n        useEffect(()=>{\r\n            socket.on('message', (message)=>{\r\n                setMessages({...messages,message});\r\n            })\r\n        }, [messages]);\r\n   //funkcija za slanje poruka\r\n\r\n\r\n    return (\r\n<div className='outerContainer'>\r\n    <div className='container'>\r\n    <InfoBar room={room} />\r\n          <Messages messages={messages} name={name} />\r\n          <Input message={message} setMessage={setMessage} sendMessage={sendMessage} /> \r\n    </div>\r\n    <TextContainer users={users}/> \r\n</div>\r\n\r\n    )\r\n}\r\n\r\nexport default Chat"],"mappings":"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"},"metadata":{},"sourceType":"module"}